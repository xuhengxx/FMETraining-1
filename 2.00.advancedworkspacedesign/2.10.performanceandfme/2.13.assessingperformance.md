# 评估性能


评估工作空间的性能，例如：

![](../../DesktopAdvanced2WorkspaceDesign/Images/Img2.073.WorkspaceForPerformanceAssessment.png)

......需要一点时间和精力，但了解工作空间的执行情况有助于在如何最佳地设计（或重新设计）方面做出明智的决策。
在测试性能时，确保只运行一个FME实例，并关闭所有其他非必要程序。你还需要一些东西记录你的时间，就像一张纸。

---

## 评估读模块性能

为了能够提高读模块的效率，需要估计它在第一个实例中的工作情况，但是这也很难在同样转换数据的工作空间中分离出来。

表示读取已完成的关键消息是“清空工厂管道”。这里，例如，读取处理26.4秒后完成的数据（当然，如果FME正在等待数据库或文件系统响应，实际经过的时间可能会更长）：

```
2018-06-29 11：48：54 | 26.4 | 0.0 | INFORM |清空工厂管道 
```

此处，有时该消息可能会产生误导。FME在读取数据的同时处理数据，因此在处理之前它不会读取整个数据集。为了避免这种混淆，请禁用所有转换器并仅运行工作空间的读取部分：

![](../../DesktopAdvanced2WorkspaceDesign/Images/Img2.013.AssessingReaderPerformanceDisabledWorkspace.png)

禁用转换器后，消息现在会更快出现：

```
2018-06-29 11:49:35 | 1.2 | 0.0 | INFORM |清空工厂管道 
```

所以我们可以看出，读取数据的时间仅为1.2秒。

---

## 评估写模块性能

与读模块一样，除非您可以首先评估写模块的性能，否则无法提高写模块的性能。但是，评估写入速度与读取具有相同的复杂性：FME一旦可用就开始写入数据，并且不一定等到处理完成。

那么，我们如何评估写模块的性能呢？评估写模块显然与读模块不同。如果通过禁用其他所有内容来隔离写模块，则不会写入任何数据！

最简单的方法是禁用写模块本身！

![](../../DesktopAdvanced2WorkspaceDesign/Images/Img2.022.AssessingWritersDisabled.png)

如果原始结果如下：

```
2018-06-29 11:54:14 | 26.5 | 0.0 | INFORM |转换成功，有19个警告（148个要素输出） 2018-06-29 11:54:14 | 26.5 | 0.0 | INFORM | FME会话持续时间：26.7秒。（CPU：22.5s用户，4.0s系统） 
```

...并且禁用了写模块，现在是这样的：

```
2018-06-29 11:56:48 | 26.6 | 0.0 | INFORM |转换成功，有19个警告（0个要素输出） 2018-06-29 11:56:48 | 26.6 | 0.0 | INFORM | FME会话持续时间：26.6秒。（CPU：22.1s用户，4.4s系统） 
```

...然后我们可以很容易地计算出写入过程仅需0.1秒。

---

| 技巧 |
|:---|
| 另一种方法是两步法。<br>首先，添加一个Recorder作为最终转换器，以便在即将写入时保留FFS格式的数据。运行工作空间。<br>其次，用Player转换器替换Recorder，重新读取保留的FFS数据。在此之前禁用其他所有内容并重新运行工作空间。<br>数据将回放到工作空间并写入输出，从而为我们提供了写模块性能的衡量标准。 |


## 评估转换性能

评估转换所需的时间需要两个步骤。

首先，禁用写模块并运行转换，记录已用时间：

![](../../DesktopAdvanced2WorkspaceDesign/Images/Img2.022.AssessingWritersDisabled.png)

然后禁用转换器并重新运行工作空间，以计算仅读取数据所需的时间。读取数据和读取/转换数据之间的运行时间差异就是因为运行的转换类型。

重要的是不要将Inspector或Logger转换器添加到末尾以查看输出发生了什么。这将减慢转换速度，并给你一个错误的方法。您还必须确保禁用实际的写模块，而不仅仅是要素类型或与它们的连接。

在这种情况下唯一有用的写模块是Null格式写模块。这使得一个写模块在场，但除了计数要素然后丢弃它们之外什么都不做。这样做的好处是可以改进要素计数的记录，但不需要写入任何数据。

---

| 警告 |
|:---|
| 当然，在使用FeatureReader或FeatureWriter转换器的情况下，评估读取和写入需要不同的过程：<br>![](../../DesktopAdvanced2WorkspaceDesign/Images/Img2.074.FeatureReaderForPerformanceAssessment.png)<br>有必要运行两次工作空间;一次在该点之后禁用所有内容，一次到那个点为止（包括该点）禁用所有内容。然后减去两个运行时间以获得正确的结果。 |

