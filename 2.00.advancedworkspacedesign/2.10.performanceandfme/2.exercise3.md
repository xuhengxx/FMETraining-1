# 练习：公园的公共艺术 - 优化

|  练习3 |
| :--- |


 公园中的公共艺术品 - 工作空间优化

数据

城市社区（谷歌KML）  
公共艺术品（微软Excel）  
 公园（MapInfo标签）  
 城市正射影像（GeoTIFF）

总体的目标

规划工作空间并确定哪些公园不包含公共艺术品

演示

优化工作空间和栅格处理

启动工作空间

C:\FMEData2018\Workspaces\DesktopAdvanced\WorkspaceDesign-Ex3-Begin.fmw

结束工作空间

C:\FMEData2018\Workspaces\DesktopAdvanced\WorkspaceDesign-Ex3-Complete.fmw

我们的工作空间几近完成; 我们只需要删除栅格被剪切时创建的黑色边框，然后将数据写出到GeoTIFF。我们还应该考虑提高这个工作空间的效率。

  
**1）打开工作空间**  
启动FME Workbench并打开WorkspaceDesign-Ex3-Begin.fmw或继续处理上一个练习中的相同工作空间。

  
**2）删除额外的要素类型**  
当我们在第一个练习中添加了社区KML时，我们添加了与之关联的所有要素类型，但我们最终只使用了社区要素类型。所有这些多余的要素类型都会降低工作空间的速度 如果在画布中添加了未在转换中使用的数据，则应将其删除。

您可以手动选择所有多余的要素类型并将其删除，也可以批量删除它们。要批量删除它们，请在菜单栏上选择工具&gt;删除...&gt;未附加.... 选择全部并单击“确定”：

_**注意：**_ _取消选中不是KML要素类型的任何节点_

 技巧

完成工作空间的开发后，还应删除多余的Logger和Inspector。

&lt;/font&gt;&lt;/font&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;

  
**3）删除无数据**  
现在我们已经删除了所有未使用的数据，我们可以继续使用我们的工作空间。

要删除无数据黑色边框，我们需要使用两个特定于栅格的转换器：RasterSelector和RasterBandNoDataSetter。首先，添加RasterSelector转换器并将其连接到Clipper：Inside输出端口。此转换器允许您选择特定的波段和调色板以与其他转换器一起操作。我们将选择所有波段和调色板，因此只需接受默认参数：

接下来，添加RasterBandNoDataSetter转换器并将其连接到RasterSelector：Output端口。在参数中将NoData值设置为0.RasterBandNoDataSetter将不会删除所选波段和调色板上的任何数据值：

  
**4）运行转换**  
重新运行转换并检查RasterBandNoDataSetter的输出：

数据看起来不错，所有的黑色边框都被删除了，并且它被社区分割，是时候把它写出了。

  
**5）写入GeoTIFF** 使用以下设置将**写模块**添加到工作空间：   


写模块格式

GeoTIFF（地理参考标记图像文件格式）

写模块数据集

C:\FMEData2018\Output\Training

栅格文件定义

自动

只需单击“确定”即可接受默认的要素类型定义。

将新要素类型连接到RasterBandNoDataSetter:Output端口。打开写模块参数并将Raster File Name设置为NeighborhoodName属性。这将扇出我们的栅格，以便每个社区将作为单独的GeoTIFF写出：

在我们检查参数时，我们还应该删除一些属性，因为我们不需要全部写出来。将选项卡切换到用户属性，然后选择手动进行属性定义。现在可以编辑所有属性。选择所有行，然后单击底部的减号按钮并删除所有属性：

  
**6）写入Excel**  
正如我们准备最后一次按下运行按钮一样，我们被要求提供一个Excel电子表格以配合Park GeoTIFF文件。这很容易做到，因为工作空间已经创建了这些数据，我们只需要将其写出来。

将Excel写模块添加到画布：

写模块格式

Microsoft Excel

写模块数据集

C:\FMEData2018\Output\Training\Neighborhoods.xlsx

文件定义

自动

将它添加到画布后，将其连接到Tester：Passed输出端口。然后进入参数并将Sheet Name设置为NeighbourhoodName：

然后切换到“用户属性”选项卡并将“属性定义”设置为“手动”。删除由PointOnAreaOverlayer创建的\_overlaps属性，但保留其余属性：

  
**7）运行转换**  
最后，运行转换。在Output \ Training文件夹中，每个社区栅格都会有一个GeoTIFF，以及一个Excel文件，每个社区都在不同的工作表上：

 恭喜

通过完成本练习，您已学会如何： &lt;/font&gt;&lt;/font&gt;

从栅格中删除NoData

通过读取日志文件来调试工作空间

解析日志文件以了解转换器正在做什么

&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/article&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;

