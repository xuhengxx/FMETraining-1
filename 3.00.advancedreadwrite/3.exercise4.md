# 练习：动态社区地图翻译（模式处理）

 练习4

 动态社区地图翻译（模式处理）

数据

社区地图（Esri文件地理数据库）

总体的目标

创建工作空间以使用现有模式生成新的社区地图数据集

演示

动态模式

启动工作空间

无

结束工作空间

C:\FMEData2018\Workspaces\DesktopAdvanced\ReadWrite-Ex4-Complete.fmw

以前的练习涉及翻译社区地图数据集，由规划部门用于各种社区地图任务。

但是，随着时间的推移，社区地图数据集已经过时了。因此，规划部门希望开始构建新的社区地图数据集。数据集将具有新数据，但尽可能使用现有模式。他们还 - 为了使用开放标准 - 希望格式更改为GML。

目前，在新的社区地图“数据库”中已经确定了两个源数据集是必需的。它们是消防站（源格式：GML）和城市公园（源格式：MapInfo TAB）。

因此，让我们创建一个新工作空间来处理该场景。

  
**1）检查数据**  
检查FME Data Inspector中的两个源数据集，以熟悉它们。

格式

GML（地理标记语言）

数据集

C:\FMEData2018\Data\Emergency\FireHalls.gml

格式

MapInfo TAB（MITAB）

数据集

C:\FMEData2018\Data\Parks\Parks.tab

社区地图中已经存在公园数据，但这次是多边形，而不是点。消防站数据对于社区地图来说是全新的。

  
**2）启动Workbench**  
让我们通过生成工作空间开始，如下所示：

读模块格式

GML（地理标记语言）

读模块数据集

C：\ FMEData2018 \ DATA \紧急\ FireHalls.gml

作家格式

GML（地理标记语言）

作家数据集

C:\FMEData2018\Data\Emergency\FireHalls.gml

工作流选项

动态模式

选择动态选项，以便我们可以使用除正在转换的数据集之外的模式。

  
**3）添加读模块**  
目前为止，一切很好。现在让我们通过选择Readers&gt; Add Reader并使用以下详细信息为新公园数据添加读模块：

读模块格式

MapInfo TAB（MITAB）

读模块数据集

C:\FMEData2018\Data\Parks\Parks.tab

工作流选项

单个合并要素类型

将新的读模块要素类型连接到现有的写模块要素类型，并为要素类型添加书签以便于识别。

  
**4）添加资源读模块**  
其中一个要求是尽可能使用现有的社区地图模式。由于消防站在社区地图地理数据库中从未存在过，因此无法实现。但是，公园数据集确实存在于该地理数据库中，因此我们需要使用该模式。

因此，选择Readers&gt; Add Reader as Resource，并在出现提示时输入以下详细信息：

读模块格式

Esri地理数据库（File Geodb Open API）

读模块数据集

C：\ FMEData2018 \ DATA \ CommunityMapping \ CommunityMap.gdb

_**注意：**_ _如果您看到“单个要素类型/单个合并要素类型”的参数，则选择“添加读模块”而不是“将读模块添加为资源”。单击取消，这次选择正确的菜单项！_

单击“确定”，读模块将添加为资源：

  
**5）调整动态参数**  
现在我们需要确保资源被使用。

检查写模块要素类型的属性。单击“Schema Sources”浏览按钮。

勾选社区地图。确保未选勾选Parks，但勾选了FireHalls：

检查其他动态参数。由于我们正在编写点和多边形，因此对于某些格式，我们可能需要更改几何对象设置。但由于GML可以应对这两种几何类型，我们不必采取任何行动; 事实上，甚至没有几何类型的参数！接受参数更改以关闭对话框。

  
**6）保存并运行工作空间**  
保存工作空间，然后运行它。

检查输出。应该有两个图层：一层用于消防站，另一层用于公园。公园数据集应该具有地理数据库（而不是MapInfo公园）中的模式，包括ParkName，ParkAddress和ParkURL的属性（即使没有数据来填充某些字段）：

请注意，它也有OBJECTID，它来自地理数据库，我们并不真正需要。

  
**7）删除属性**  
重新访问写模块要素类型参数。在要删除的属性下键入OBJECTID到第一行。您将无法从下拉列表中选择它，因为它来自资源读模块，而不是真正的读模块：

但是不要接受这些改变......

  
**8）添加属性**  
最后一刻请求是向输出中的所有表添加属性 - _LastUpdatedBy_。

因此，单击“用户属性”选项卡并添加此新属性。使它成为30个字符的字符串。

如您所见，无需更改属性定义模式 - 它应保持_动态_。

  
**9）重新运行工作空间**  
保存工作空间并重新运行它。

检查输出。请注意，OBJECTID不会显示为属性。LastUpdatedBy确实出现了，虽然它还没有值。

 恭喜

 通过完成本练习，您已学会如何：&lt;/font&gt;

添加资源读模块

更改动态工作空间模式的源

在动态工作空间中添加和删除硬编码属性

&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/article&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;

